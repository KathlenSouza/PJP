<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pequenos Passos ‚Äî Acompanhamento Infantil</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js (para radar) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- jsPDF -->
  <script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- FullCalendar para o calend√°rio interativo -->
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css' rel='stylesheet' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>

  <style>
    /* Pequenos ajustes visuais adicionais */
    .progress-bar { height: 10px; background: #e7eefc; border-radius: 999px; overflow: hidden; }
    .progress-fill { height: 100%; border-radius: 999px; transition: width 0.25s ease; }
    .card { background: white; border-radius: 12px; box-shadow: 0 6px 18px rgba(59,130,246,0.06); }
    .emoji-circle { width: 48px; height: 48px; display:flex;align-items:center;justify-content:center;border-radius:999px;background:linear-gradient(135deg,#fff6f0,#fffbeb); font-size:22px; }
  #calendar { max-width: 100%; }
    .diary-entry { border-left: 3px solid #3b82f6; padding-left: 12px; margin-bottom: 12px; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-pink-50 text-slate-800 p-4 md:p-8">

  <div class="max-w-6xl mx-auto">

    <!-- HEADER -->
    <header class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-extrabold text-blue-600"> Pequenos Passos</h1>
      <p class="mt-2 text-slate-600">Acompanhamento do desenvolvimento infantil ‚Äî idades 4 a 6 anos</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">

      <!-- LEFT: Perfil + Radar -->
      <section class="lg:col-span-2 space-y-6">

        <!-- Perfil da Crian√ßa -->
        <div class="card p-6">
          <div class="flex items-center gap-4 mb-4">
            <div class="emoji-circle">üß∏</div>
            <div>
              <h2 class="text-xl font-semibold">Perfil da Crian√ßa</h2>
              <p class="text-sm text-slate-500">Nome, idade e ajustes r√°pidos</p>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label for="inputName" class="block text-sm font-medium text-slate-700">Nome</label>
              <input id="inputName" type="text" value="Sophia"
                class="mt-1 block w-full rounded-md border border-slate-200 p-2 focus:outline-none focus:ring-2 focus:ring-blue-200" />
            </div>

            <div>
              <label for="inputAge" class="block text-sm font-medium text-slate-700">Idade</label>
              <input id="inputAge" type="number" min="4" max="6" value="5"
                class="mt-1 block w-full rounded-md border border-slate-200 p-2 focus:outline-none focus:ring-2 focus:ring-blue-200" />
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-700">Atualizar gr√°fico</label>
              <button id="btnUpdateChart"
                class="mt-1 w-full inline-flex items-center justify-center gap-2 rounded-md bg-gradient-to-br from-rose-400 to-blue-500 text-white py-2 px-3 shadow-md hover:opacity-95">
                üîÑ Atualizar Radar
              </button>
            </div>
          </div>
        </div>

        <!-- Radar + Insights -->
        <div class="card p-6">
          <div class="flex items-center justify-between mb-4">
            <div>
              <h3 class="text-lg font-semibold">Radar de Desenvolvimento</h3>
              <p class="text-sm text-slate-500">Visualize as √°reas: Motor, Cognitivo, Social e Linguagem</p>
            </div>
            <div class="text-sm text-slate-600">Idade: <span id="showAge" class="font-semibold">5</span> anos</div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <div>
              <canvas id="radarChart" aria-label="Radar de desenvolvimentos" role="img"></canvas>
            </div>

            <div class="space-y-4">
              <!-- sliders for milestones -->
              <div>
                <label class="flex justify-between text-sm font-medium text-slate-700">
                  <span>Motor</span><span id="labelMotor">75%</span>
                </label>
                <input id="inpMotor" type="range" min="0" max="100" value="75" class="w-full mt-2" />
                <div class="progress-bar mt-2"><div id="fillMotor" class="progress-fill bg-[#FDE68A]" style="width:75%"></div></div>
                <p class="text-xs text-slate-500 mt-1">Coordena√ß√£o motora grossa e fina.</p>
              </div>

              <div>
                <label class="flex justify-between text-sm font-medium text-slate-700">
                  <span>Cognitivo</span><span id="labelCognitive">60%</span>
                </label>
                <input id="inpCognitive" type="range" min="0" max="100" value="60" class="w-full mt-2" />
                <div class="progress-bar mt-2"><div id="fillCognitive" class="progress-fill bg-[#BFDBFE]" style="width:60%"></div></div>
                <p class="text-xs text-slate-500 mt-1">Racioc√≠nio, aten√ß√£o e resolu√ß√£o de problemas.</p>
              </div>

              <div>
                <label class="flex justify-between text-sm font-medium text-slate-700">
                  <span>Social</span><span id="labelSocial">80%</span>
                </label>
                <input id="inpSocial" type="range" min="0" max="100" value="80" class="w-full mt-2" />
                <div class="progress-bar mt-2"><div id="fillSocial" class="progress-fill bg-[#C7F9CC]" style="width:80%"></div></div>
                <p class="text-xs text-slate-500 mt-1">Intera√ß√£o, empatia e brincadeiras em grupo.</p>
              </div>

              <div>
                <label class="flex justify-between text-sm font-medium text-slate-700">
                  <span>Linguagem</span><span id="labelLanguage">70%</span>
                </label>
                <input id="inpLanguage" type="range" min="0" max="100" value="70" class="w-full mt-2" />
                <div class="progress-bar mt-2"><div id="fillLanguage" class="progress-fill bg-[#FBCFE8]" style="width:70%"></div></div>
                <p class="text-xs text-slate-500 mt-1">Vocabul√°rio, compreens√£o e express√£o.</p>
              </div>
            </div>
          </div>

          <!-- alerts -->
          <div id="alertsContainer" class="mt-4"></div>
        </div>
         <!-- Calend√°rio Interativo com Vacina√ß√£o -->
        <div class="card p-6">
          <div class="flex items-center gap-4 mb-4">
            <div class="emoji-circle">üìÖ</div>
            <div>
              <h3 class="text-lg font-semibold">Calend√°rio de Vacina√ß√£o e Eventos</h3>
              <p class="text-sm text-slate-500">Acompanhe vacinas e marcos importantes. Clique para adicionar eventos.</p>
            </div>
          </div>
          <div id="calendar"></div>
          <div class="mt-4 text-xs text-slate-500">
            <strong>Vacinas para 4-6 anos (exemplos baseados em calend√°rio brasileiro):</strong><br>
            - 4 anos: Refor√ßo DTP (Difteria, T√©tano, Coqueluche)<br>
            - 5 anos: Refor√ßo IPV (P√≥lio) e MMRV (Sarampo, Caxumba, Rub√©ola, Varicela)<br>
            - 6 anos: Refor√ßo contra Hepatite A<br>
            Consulte um m√©dico para datas exatas!
          </div>
        </div>


        <!-- Activities list (left column wide) -->
        <div class="card p-6">
          <div class="flex items-center gap-4 mb-4">
            <div class="emoji-circle">üé≤</div>
            <div>
              <h3 class="text-lg font-semibold">Atividades Sugeridas</h3>
              <p class="text-sm text-slate-500">Tarefas r√°pidas, divertidas e com objetivo educativo</p>
            </div>
          </div>

          <div id="activitiesGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- activities are injected by JS -->
          </div>
        </div>
      </section>

      <!-- RIGHT: Recursos e Biblioteca -->
      <aside class="space-y-6">

        <div class="card p-6">
          <div class="flex items-center gap-3 mb-3">
            <div class="emoji-circle">üìö</div>
            <h4 class="text-lg font-semibold">Biblioteca</h4>
          </div>
          <p class="text-sm text-slate-600 mb-4">Livros, v√≠deos e artigos recomendados.</p>

          <ul class="space-y-3 text-sm">
            <li class="flex justify-between items-center">
              <div>
                <div class="font-medium">Aprendendo a Contar</div>
                <div class="text-xs text-slate-500">Maria Silva ‚Äî Guia pr√°tico</div>
              </div>
              <button class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded">Ver</button>
            </li>
            <li class="flex justify-between items-center">
              <div>
                <div class="font-medium">Atividades com Cores (V√≠deo)</div>
                <div class="text-xs text-slate-500">8 min ‚Äî Canal Educa√ß√£o</div>
              </div>
              <button class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded">Ver</button>
            </li>
            <li class="flex justify-between items-center">
              <div>
                <div class="font-medium">Jogos Cooperativos (Artigo)</div>
                <div class="text-xs text-slate-500">Resumo pr√°tico</div>
              </div>
              <button class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded">Ler</button>
            </li>
          </ul>
        </div>
        <!-- Di√°rio Digital -->
        <div class="card p-6">
          <div class="flex items-center gap-3 mb-3">
            <div class="emoji-circle">üìù</div>
            <h4 class="text-lg font-semibold">Di√°rio Digital</h4>
          </div>
          <p class="text-sm text-slate-600 mb-4">Registre observa√ß√µes di√°rias sobre o desenvolvimento da crian√ßa.</p>
          
          <div class="space-y-3">
            <div class="flex gap-2">
              <input id="diaryDate" type="date" class="flex-1 rounded-md border border-slate-200 p-2 text-sm" value="" />
              <button id="btnAddDiary" class="px-4 py-2 bg-blue-500 text-white rounded-md text-sm hover:bg-blue-600">Adicionar</button>
            </div>
            <textarea id="diaryNote" placeholder="O que aconteceu hoje? (ex: 'Sophia contou at√© 8 hoje!')" 
              class="w-full rounded-md border border-slate-200 p-2 text-sm h-20 focus:outline-none focus:ring-2 focus:ring-blue-200"></textarea>
          </div>
          
          <div id="diaryEntries" class="mt-4 max-h-48 overflow-y-auto space-y-2">
            <!-- Entradas do di√°rio ser√£o injetadas aqui -->
          </div>
        </div>

        <div class="card p-6">
          <div class="flex items-center gap-3 mb-3">
            <div class="emoji-circle">üñ®Ô∏è</div>
            <h4 class="text-lg font-semibold">Exportar</h4>
          </div>
          <p class="text-sm text-slate-600 mb-4">Baixe um resumo em PDF de qualquer atividade.</p>
          <button id="btnExportAll" class="w-full bg-gradient-to-br from-rose-400 to-blue-500 text-white py-2 rounded">üìÑ Exportar Relat√≥rio</button>
        </div>

        <div class="card p-6 text-xs text-slate-500">
          <strong>Nota:</strong> Os dados s√£o tempor√°rios (salvos enquanto a p√°gina estiver aberta). Para persistir, podemos adicionar armazenamento local ou backend.
        </div>

      </aside>
    </main>

    <footer class="mt-10 text-center text-sm text-slate-600">
      Desenvolvido com ‚ù§Ô∏è para o crescimento saud√°vel das crian√ßas
    </footer>
  </div>

  <!-- SCRIPT: Dados e l√≥gica -->
  <script>
    // --- initial app state ---
    const state = {
      childName: 'Sophia',
      childAge: 5,
      milestones: {
        motor: 75,
        cognitive: 60,
        social: 80,
        language: 70
      },
      activities: [
        {
          id: 1,
          title: 'Contar Objetos',
          category: 'Matem√°tica',
          description: 'Contar at√© 10 usando objetos do dia a dia. Incentive a explora√ß√£o com brinquedos e alimentos (rolhas, bot√µes).',
          duration: '15 min',
          resources: [
            { type: 'book', title: 'Aprendendo a Contar' },
            { type: 'video', title: 'Como ensinar contagem (5 min)' }
          ]
        },
        {
          id: 2,
          title: 'Reconhecer Cores',
          category: 'Cognitivo',
          description: 'Atividade de identifica√ß√£o e agrupamento por cores usando cart√µes coloridos ou brinquedos.',
          duration: '10 min',
          resources: [
            { type: 'book', title: 'O Mundo das Cores' },
            { type: 'video', title: 'Atividades com cores (8 min)' }
          ]
        },
        {
          id: 3,
          title: 'Brincadeira Cooperativa',
          category: 'Social',
          description: 'Jogue em grupo com regras simples, incentivando a partilha e turnos.',
          duration: '20 min',
          resources: [
            { type: 'article', title: 'Import√¢ncia do jogo cooperativo' }
          ]
        }
      ]
    };

    // --- DOM refs ---
    const inputName = document.getElementById('inputName');
    const inputAge = document.getElementById('inputAge');
    const showAge = document.getElementById('showAge');

    const inpMotor = document.getElementById('inpMotor');
    const inpCognitive = document.getElementById('inpCognitive');
    const inpSocial = document.getElementById('inpSocial');
    const inpLanguage = document.getElementById('inpLanguage');

    const labelMotor = document.getElementById('labelMotor');
    const labelCognitive = document.getElementById('labelCognitive');
    const labelSocial = document.getElementById('labelSocial');
    const labelLanguage = document.getElementById('labelLanguage');

    const fillMotor = document.getElementById('fillMotor');
    const fillCognitive = document.getElementById('fillCognitive');
    const fillSocial = document.getElementById('fillSocial');
    const fillLanguage = document.getElementById('fillLanguage');

    const btnUpdateChart = document.getElementById('btnUpdateChart');
    const alertsContainer = document.getElementById('alertsContainer');
    const activitiesGrid = document.getElementById('activitiesGrid');
    const btnExportAll = document.getElementById('btnExportAll');

    // --- initialize inputs with state ---
    inputName.value = state.childName;
    inputAge.value = state.childAge;
    showAge.textContent = state.childAge;

    // update progress labels & fills
    function syncMilestoneUI() {
      labelMotor.textContent = state.milestones.motor + '%';
      labelCognitive.textContent = state.milestones.cognitive + '%';
      labelSocial.textContent = state.milestones.social + '%';
      labelLanguage.textContent = state.milestones.language + '%';

      fillMotor.style.width = state.milestones.motor + '%';
      fillCognitive.style.width = state.milestones.cognitive + '%';
      fillSocial.style.width = state.milestones.social + '%';
      fillLanguage.style.width = state.milestones.language + '%';
    }

    // --- Chart.js Radar setup ---
    const ctx = document.getElementById('radarChart').getContext('2d');
    const radarChart = new Chart(ctx, {
      type: 'radar',
      data: {
        labels: ['Motor', 'Cognitivo', 'Social', 'Linguagem'],
        datasets: [{
          label: 'Progresso (%)',
          data: [
            state.milestones.motor,
            state.milestones.cognitive,
            state.milestones.social,
            state.milestones.language
          ],
          fill: true,
          backgroundColor: 'rgba(59,130,246,0.18)',
          borderColor: 'rgba(59,130,246,0.95)',
          pointBackgroundColor: 'rgba(99,102,241,1)',
          pointBorderColor: '#fff',
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: 'rgba(99,102,241,1)'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          r: {
            angleLines: { color: '#e6eefc' },
            grid: { color: '#e6eefc' },
            suggestedMin: 0,
            suggestedMax: 100,
            ticks: { stepSize: 20, color: '#6b7280' },
            pointLabels: { color: '#374151', font: { size: 12 } }
          }
        },
        plugins: {
          legend: { display: false },
          tooltip: { callbacks: { label: ctx => `${ctx.formattedValue}%` } }
        }
      }
    });

    // --- update chart data ---
    function updateChart() {
      radarChart.data.datasets[0].data = [
        state.milestones.motor,
        state.milestones.cognitive,
        state.milestones.social,
        state.milestones.language
      ];
      radarChart.update();
      evaluateAlerts();
    }

    // --- alerts when any area < 50% ---
    function evaluateAlerts() {
      const needs = Object.entries(state.milestones)
        .filter(([k,v]) => v < 50)
        .map(([k]) => k);

      if (needs.length === 0) {
        alertsContainer.innerHTML = `<div class="rounded-md p-3 bg-green-50 text-green-700">Tudo dentro do esperado! Continue refor√ßando as atividades.</div>`;
      } else {
        const human = needs.map(k =>
          k === 'motor' ? 'Motor' :
          k === 'cognitive' ? 'Cognitivo' :
          k === 'social' ? 'Social' : 'Linguagem'
        ).join(', ');
        alertsContainer.innerHTML = `<div class="rounded-md p-3 bg-amber-50 text-amber-700">‚ö†Ô∏è Aten√ß√£o: as √°reas ${human} precisam de refor√ßo. Veja atividades sugeridas abaixo.</div>`;
      }
    }

    // --- activities rendering ---
    function renderActivities() {
      activitiesGrid.innerHTML = '';
      state.activities.forEach(activity => {
        const card = document.createElement('div');
        card.className = 'rounded-lg p-4';
        card.style.background = 'linear-gradient(180deg,#fff,#fbfbff)';
        card.innerHTML = `
          <div class="flex items-start justify-between gap-3">
            <div>
              <h4 class="font-semibold">${activity.title}</h4>
              <div class="text-xs text-slate-500">${activity.category} ‚Ä¢ ${activity.duration}</div>
              <p class="text-sm text-slate-600 mt-2">${activity.description}</p>
            </div>
            <div class="flex flex-col items-end gap-2">
              <button class="btnPDF text-white text-sm py-2 px-3 rounded">üìÑ PDF</button>
              <button class="btnDetails text-slate-600 text-xs">Recursos</button>
            </div>
          </div>
        `;
        // attach handlers
        const btnPdf = card.querySelector('.btnPDF');
        btnPdf.addEventListener('click', () => generateActivityPDF(activity));

        const btnDetails = card.querySelector('.btnDetails');
        btnDetails.addEventListener('click', () => {
          alert('Recursos:\n' + activity.resources.map(r => `‚Ä¢ ${r.title || r.type}`).join('\n'));
        });

        activitiesGrid.appendChild(card);
      });
    }

    // --- PDF generation for an activity (jsPDF) ---
    function generateActivityPDF(activity) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ unit: 'pt', format: 'a4' });
      const margin = 40;
      let y = 60;

      doc.setFillColor(59,130,246);
      doc.rect(0,0,595,70,'F');
      doc.setTextColor(255,255,255);
      doc.setFontSize(22);
      doc.text(`Atividade: ${activity.title}`, 40, 44);

      doc.setFontSize(12);
      doc.setTextColor(30,30,30);
      doc.text(`Para: ${state.childName} (idade: ${state.childAge})`, margin, y);
      y += 20;
      doc.setFontSize(14);
      doc.text('Descri√ß√£o:', margin, y + 10);
      doc.setFontSize(12);
      const lines = doc.splitTextToSize(activity.description, 520 - margin * 2);
      doc.text(lines, margin, y + 30);
      y += lines.length * 14 + 20;

      doc.setFontSize(12);
      doc.text(`Dura√ß√£o: ${activity.duration}`, margin, y);
      y += 18;

      doc.text('Recursos:', margin, y);
      activity.resources.forEach(r => {
        y += 14;
        doc.text(`- ${r.title || r.type}`, margin + 10, y);
      });

      y += 30;
      doc.setFontSize(10);
      doc.setTextColor(120,120,120);
      doc.text(`Gerado em: ${new Date().toLocaleDateString('pt-BR')}`, margin, y);

      const filename = `atividade-${activity.title.toLowerCase().replace(/\s+/g, '-')}.pdf`;
      doc.save(filename);
    }

    // --- Export summary (all activities + milestones) ---
    function exportSummaryPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ unit: 'pt', format: 'a4' });
      const margin = 40;
      let y = 60;

      doc.setFillColor(254,202,202);
      doc.rect(0,0,595,70,'F');
      doc.setTextColor(74,20,140);
      doc.setFontSize(20);
      doc.text('Relat√≥rio Crescer & Aprender', margin, 46);

      doc.setFontSize(12);
      doc.setTextColor(30,30,30);
      doc.text(`Nome: ${state.childName}`, margin, y);
      doc.text(`Idade: ${state.childAge}`, margin + 300, y);
      y += 20;

      doc.setFontSize(13);
      doc.text('Milestones:', margin, y + 10);
      y += 24;

      Object.entries(state.milestones).forEach(([k,v]) => {
        const label = k === 'motor' ? 'Motor' : k === 'cognitive' ? 'Cognitivo' : k === 'social' ? 'Social' : 'Linguagem';
        doc.text(`${label}: ${v}%`, margin, y);
        y += 16;
      });

      y += 8;
      doc.setFontSize(13);
      doc.text('Atividades Sugeridas:', margin, y);
      y += 20;

      state.activities.forEach(a => {
        doc.setFontSize(12);
        doc.text(`‚Ä¢ ${a.title} (${a.category}, ${a.duration})`, margin + 10, y);
        y += 16;
        const desc = doc.splitTextToSize(a.description, 520 - margin * 2);
        doc.setFontSize(11);
        doc.text(desc, margin + 18, y);
        y += desc.length * 12 + 8;
      });

      doc.setFontSize(10);
      doc.setTextColor(120,120,120);
      doc.text(`Gerado em: ${new Date().toLocaleDateString('pt-BR')}`, margin, 780);

      doc.save(`resumo-${state.childName.toLowerCase().replace(/\s+/g,'-')}.pdf`);
    }

    // --- event wiring ---
    // inputs update state live
    inputName.addEventListener('input', (e) => {
      state.childName = e.target.value || '‚Äî';
    });
    inputAge.addEventListener('input', (e) => {
      const v = parseInt(e.target.value) || 0;
      state.childAge = v;
      showAge.textContent = v;
    });

    inpMotor.addEventListener('input', (e) => {
      state.milestones.motor = Number(e.target.value);
      labelMotor.textContent = state.milestones.motor + '%';
      fillMotor.style.width = state.milestones.motor + '%';
    });
    inpCognitive.addEventListener('input', (e) => {
      state.milestones.cognitive = Number(e.target.value);
      labelCognitive.textContent = state.milestones.cognitive + '%';
      fillCognitive.style.width = state.milestones.cognitive + '%';
    });
    inpSocial.addEventListener('input', (e) => {
      state.milestones.social = Number(e.target.value);
      labelSocial.textContent = state.milestones.social + '%';
      fillSocial.style.width = state.milestones.social + '%';
    });
    inpLanguage.addEventListener('input', (e) => {
      state.milestones.language = Number(e.target.value);
      labelLanguage.textContent = state.milestones.language + '%';
      fillLanguage.style.width = state.milestones.language + '%';
    });

    // update chart when press button (or you can update live below)
    btnUpdateChart.addEventListener('click', () => {
      updateChart();
    });

    // also update chart live when sliders stop (nice UX)
    [inpMotor, inpCognitive, inpSocial, inpLanguage].forEach(inp => {
      inp.addEventListener('change', () => updateChart());
    });

    // export all
    btnExportAll.addEventListener('click', () => exportSummaryPDF());

    // initial render
    syncMilestoneUI();
    renderActivities();
    evaluateAlerts();
    updateChart();

    // optional: auto-update chart every few seconds while editing (commented)
    // setInterval(updateChart, 2000);
  </script>
</body>
</html>
